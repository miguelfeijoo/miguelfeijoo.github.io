<!DOCTYPE html>
<meta charset="utf-8">

<svg width="2500" height="2000"></svg>

<link href="https://fonts.googleapis.com/css?family=Lato:100,300,300i,400" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script type="text/javascript" src="https://d3js.org/d3.v5.min.js"></script> 
<script>
var nodes = [
  //{ id: "Afganistan", label: "Afganistan", level: 2 },
  { id: "Alemania"   , label: "Alemania"   , type: "País" ,  level: 2, quantity:1945722.45 , value: 21322.7149},
  { id: "Antillas Holandesas"   , label: "Antillas Holandesas"   , type: "País"   , level: 2, quantity:11500 , value: 21.87458 },
  { id: "Argentina"   , label: "Argentina"   , type: "País"  , level: 2 , quantity: 1311882.18, value:55368.43814 },
  { id: "Australia"   , label: "Australia"   , type: "País"    , level: 2 , quantity:210 , value:3.86057 },
  { id: "Austria", label: "Austria"   , type: "País", level: 2, quantity: 25327.56, value: 408.22257 },
  { id: "Belgica"   , label: "Belgica"   , type: "País"   , level: 2, quantity: 541185.62, value: 12064.71644 },
  //{ id: "Bolivia"   , label: "Bolivia"   , level: 2 },
  { id: "Brasil"  , label: "Brasil"     , type: "País" , level: 2 , quantity:9734631.23, value:118815.81996 },
  { id: "Canada"  , label: "Canada"   , type: "País"   , level: 2 , quantity: 1312561.49, value: 11494.44159},
  { id: "Chile"  , label: "Chile"   , type: "País"  , level: 2, quantity:1457260.04 , value:11739.76771  },
  { id: "China", label: "China"   , type: "País", level: 2, quantity: 11137702.67, value:46.7144  },
  { id: "Colombia"   , label: "Colombia"   , type: "País"   , level: 2, quantity: 101972.78, value:352.4473  },
  { id: "Corea"   , label: "Corea"    , type: "País"  , level: 2, quantity: 912, value:27.87535  },
  { id: "Costa de Marfil"   , label: "Costa de Marfil"   , type: "País"  , level: 2 , quantity:21000 , value:262.85872 },
  { id: "Costa Rica"   , label: "Costa Rica"    , type: "País"   , level: 2, quantity:98365.66 , value:1.50133  },
  { id: "Dinamarca", label: "Dinamarca"   , type: "País", level: 2, quantity:6488.64 , value: 345.50834 },
  { id: "Ecuador"   , label: "Ecuador"    , type: "País" , level: 2, quantity: 46276101.22, value: 354551.60104 },
  { id: "El Salvador"   , label: "El Salvador"    , type: "País"  , level: 2, quantity:23383.58 , value: 145.53788 },
  { id: "España"  , label: "España"    , type: "País"  , level: 2 , quantity:2662494.23 , value:32686.75547 },
  { id: "Estados Unidos"  , label: "Estados Unidos"    , type: "País"  , level: 2 , quantity: 19997622.94, value:277637.96184 },
  { id: "Filipinas"  , label: "Filipinas"    , type: "País" , level: 2 , quantity: 141, value:1.54106 },
  { id: "Finlandia", label: "Finlandia"   , type: "País", level: 2, quantity: 0.4, value:0.08036  },
  { id: "Francia"   , label: "Francia"   , type: "País"   , level: 2 , quantity: 567092.34, value:11736.2377 },
  { id: "Ghana"   , label: "Ghana"    , type: "País"  , level: 2 , quantity:21000 , value:248.00893 },
  { id: "Guatemala"   , label: "Guatemala"   , type: "País"  , level: 2 , quantity: 35123.74, value:209.77825 },
  { id: "Hong Kong"   , label: "Hong Kong"    , type: "País"   , level: 2 , quantity: 31856.35, value:394.71005 },
  { id: "Hungria", label: "Hungria"   , type: "País", level: 2 , quantity: 5438.15, value:129.00718 },
  { id: "India"   , label: "India"    , type: "País"  , level: 2 , quantity: 16601.96, value:100.01418 },
  { id: "Indonesia"   , label: "Indonesia"   , type: "País"   , level: 2, quantity: 684930.53, value:4125.07923  },
  { id: "Irlanda"  , label: "Irlanda"   , type: "País"   , level: 2 , quantity: 1062.68, value:68.60205 },
  { id: "Israel"  , label: "Israel"   , type: "País"   , level: 2, quantity:79.8 , value:1.67742 },
  { id: "Italia"  , label: "Italia"   , type: "País"  , level: 2, quantity: 3985129.27, value: 53516.29073 },
  { id: "Japon", label: "Japon"   , type: "País", level: 2 , quantity:3900, value: 44.61224},
  { id: "Libano"   , label: "Libano"    , type: "País"  , level: 2 , quantity: 2555.2, value:4.77244 },
  { id: "Malasia"   , label: "Malasia"   , type: "País"   , level: 2 , quantity:395408.95 , value:6764.23161 },
  { id: "Mexico"   , label: "Mexico"   , type: "País"  , level: 2 , quantity: 8972774.5, value:76454.68738 },
  { id: "Nigeria"   , label: "Nigeria"   , type: "País"    , level: 2 , quantity:54000 , value:334.14966},
  { id: "Paises Bajos", label: "Paises Bajos"   , type: "País", level: 2 , quantity:219550.2 , value:2760.95681 },
  { id: "Pakistan"   , label: "Pakistan"   , type: "País"   , level: 2 , quantity:20524.8 , value: 226.01452},
  { id: "Panama"   , label: "Panama"   , type: "País"   , level: 2 , quantity:3412.78 , value: 53.43474},
  { id: "Peru"  , label: "Peru"    , type: "País"  , level: 2, quantity: 15027575.43, value: 98539.1655499999 },
  { id: "Polonia"  , label: "Polonia"    , type: "País"  , level: 2 , quantity: 183530.39, value:2695.81539},
  { id: "Portugal"  , label: "Portugal"    , type: "País" , level: 2 , quantity: 12762.66, value:362.36831 },
  { id: "Reino Unido", label: "Reino Unido"   , type: "País", level: 2 , quantity:115468.64 , value:3660.05395 },
  { id: "Republica Checa"   , label: "Republica Checa"   , type: "País"   , level: 2 , quantity: 11758.7, value: 302.35212},
  { id: "Republica Dominicana"   , label: "Republica Dominicana"    , type: "País"  , level: 2 , quantity: 907000, value:5375.61172 },
  { id: "Reunion"   , label: "Reunion"   , type: "País"  , level: 2, quantity:14943.68 , value: 14943.68 },
  { id: "Rumania"   , label: "Rumania"   , type: "País"    , level: 2 , quantity: 14326.56, value:97.56898 },
  { id: "Serbia"   , label: "Serbia"   , type: "País"   , level: 2 , quantity: 17991.03, value:290.98963 },
  { id: "Singapur"  , label: "Singapur"    , type: "País"  , level: 2 , quantity: 33372, value:188.94878 },
  { id: "Suecia"  , label: "Suecia"      , type: "País", level: 2 , quantity: 6651.1, value:199.5751 },
  { id: "Suiza"  , label: "Suiza"   , type: "País"  , level: 2 , quantity: 807612.08, value: 24170.73516},
  { id: "Taiwan, Provincia China", label: "Taiwan, Provincia China",  type: "País" ,level: 2 , quantity: 6640.28, value:116.2629 },
  { id: "Tokelau"   , label: "Tokelau"   , type: "País"   , level: 2 , quantity: 6331, value: 28.48091},
  { id: "Trinidad y Tobago"   , label: "Trinidad y Tobago"   , type: "País"   , level: 2 , quantity:876060 , value:5731.86042 },
  { id: "Turquia"   , label: "Turquia"   , type: "País"  , level: 2 , quantity: 5760647.62, value:26307.88796 },
  { id: "Uruguay"   , label: "Uruguay"   , type: "País"    , level: 2 , quantity: 5401.9, value:60.49595 },
  { id: "Venezuela"  , label: "Venezuela"  , level: 2 , quantity: 2815039.4, value:14778.20495 },
  { id: "Vietnam", label: "Vietnam"   , type: "País", level: 2, quantity: 1298.9, value:99.57657  }, 
  { id: "Atlántico"  , label: "Atlántico"   , type: "Departamento de Colombia"  , level: 1 , quantity:194646896.98  , value: 0 },
  { id: "Antioquia"   , label: "Antioquia"   , type: "Departamento de Colombia"    , level: 1, quantity: 200273827.94, value:0  },
  { id: "Bogotá"   , label: "Bogotá"   , type: "Departamento de Colombia"   , level: 1, quantity:203186028.33 , value:0  },
  { id: "Cundinamarca"  , label: "Cundinamarca"   , type: "Departamento de Colombia"    , level: 1, quantity:200203882.04 , value:0  },
  { id: "Valle del Cauca"  , label: "Valle del Cauca"   , type: "Departamento de Colombia"    , level: 1, quantity:188629841.52 , value:  0},
  { id: "Caldas"  , label: "Caldas"   , type: "Departamento de Colombia"   , level: 1, quantity: 176519578.95, value:0  },
  { id: "Risaralda", label: "Risaralda"   , type: "Departamento de Colombia" , level: 1, quantity:197487618.37 , value: 0 },
  { id: "Nariño", label: "Nariño"   , type: "Departamento de Colombia" , level: 1 , quantity:165956105.89 , value:0 },
  //{ id: "Meta"   , label: "Meta"   , level: 1 },
  { id: "Cauca"   , label: "Cauca"   , type: "Departamento de Colombia"    , level: 1, quantity:159862801.72 , value: 0 },
  { id: "La Guajira"   , label: "La Guajira"   , type: "Departamento de Colombia"   , level: 1, quantity:118041075.79 , value: 0 },
  { id: "Bolivar"   , label: "Bolívar"   , type: "Departamento de Colombia"     , level: 1, quantity:190667015.23 , value: 0 },
  { id: "Córdoba", label: "Córdoba"   , type: "Departamento de Colombia" , level: 1 , quantity:31069522.73 , value:0 },
  //{ id: "Tolima"   , label: "Tolima"   , level: 1 },
  { id: "Magdalena"   , label: "Magdalena"   , type: "Departamento de Colombia"    , level: 1 , quantity: 1914966.19, value:0 },
  { id: "Santander"  , label: "Santander"   , type: "Departamento de Colombia"    , type: "Departamento de Colombia"    , level: 1 , quantity:178214283.33 , value: 0},
  //{ id: "Amazonas"  , label: "Amazonas"   , level: 1 },
  //{ id: "Putumayo"  , label: "Putumayo"  , level: 1 },
  { id: "San Andrés y Providencia", label: "San Andrés y Providencia"   , type: "Departamento de Colombia" , level: 1, quantity: 9977182.31, value: 0 },
  { id: "Huila"   , label: "Huila"   , type: "Departamento de Colombia"    , level: 1 , quantity:17000 , value: 0},
  { id: "Norte de Santander"   , label: "Norte de Santander"   , type: "Departamento de Colombia"    , level: 1 , quantity:46278446.79 , value:0 },
  //{ id: "Cesar"   , label: "Cesar"  , level: 1 },
  { id: "Sucre"   , label: "Sucre"   , type: "Departamento de Colombia"     , level: 1 , quantity:4000 , value:0 },
  { id: "Quindío"   , label: "Quindío"   , type: "Departamento de Colombia"    , level: 1, quantity: 18247.76, value: 0 }
]
var links = [
  { target: "Antioquia", source: "Alemania" , strength: 0.85 },
  { target: "Atlántico", source: "Alemania" , strength: 0.85 },
  { target: "Bogotá", source: "Alemania" , strength: 0.85 },
   { target: "Caldas", source: "Alemania" , strength: 0.85 },
  { target: "Cundinamarca", source: "Alemania" , strength: 0.85 },
  { target: "Risaralda", source: "Alemania" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Alemania" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Antillas Holandesas" , strength: 0.85 },
  { target: "Antioquia", source: "Argentina" , strength: 0.85 },
  { target: "Bogotá", source: "Argentina" , strength: 0.85 },
  { target: "Caldas", source: "Argentina" , strength: 0.85 },
  { target: "Cundinamarca", source: "Argentina" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Argentina" , strength: 0.85 },
    { target: "Bogotá", source: "Australia" , strength: 0.85 },
  { target: "Risaralda", source: "Austria" , strength: 0.85 },
  { target: "Bogotá", source: "Austria" , strength: 0.85 },
  { target: "Cundinamarca", source: "Austria" , strength: 0.85 },
  { target: "Atlántico", source: "Belgica" , strength: 0.85 },
  { target: "Bogotá", source: "Belgica" , strength: 0.85 },
  { target: "Cundinamarca", source: "Belgica" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Belgica" , strength: 0.85 },
  { target: "Antioquia"  , source: "Brasil", strength: 0.85 },
  { target: "Atlántico"  , source: "Brasil", strength: 0.85 },
  { target: "Bogotá"  , source: "Brasil", strength: 0.85 },
  { target: "Bolivar"  , source: "Brasil", strength: 0.85 },
  { target: "Caldas"  , source: "Brasil", strength: 0.85 },
  { target: "Cauca"  , source: "Brasil", strength: 0.85 },
  { target: "Córdoba"  , source: "Brasil", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Brasil", strength: 0.85 },
  { target: "La Guajira"  , source: "Brasil", strength: 0.85 },
  { target: "Nariño"  , source: "Brasil", strength: 0.85 },
  { target: "Risaralda"  , source: "Brasil", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Brasil", strength: 0.85 },
  { target: "Antioquia"  , source: "Canada", strength: 0.85 },
  { target: "Bogotá"  , source: "Canada", strength: 0.85 },
  { target: "Bolivar"  , source: "Canada", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Canada", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Canada", strength: 0.85 },
  { target: "Cundinamarca", source: "Chile" , strength: 0.85 },
  { target: "Bogotá", source: "Chile" , strength: 0.85 },
  { target: "Risaralda", source: "Chile" , strength: 0.85 },
  { target: "Antioquia", source: "Chile" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Chile" , strength: 0.85 },
  { target: "Antioquia", source: "China" , strength: 0.85 },
  { target: "Atlántico"  , source: "China", strength: 0.85 },
  { target: "Bogotá"  , source: "China", strength: 0.85 },
  { target: "Cundinamarca", source: "China" , strength: 0.85 },
  { target: "La Guajira"  , source: "China", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "China", strength: 0.85 },
  { target: "Santander"  , source: "China", strength: 0.85 },
  { target: "Antioquia"  , source: "Colombia", strength: 0.85 },
  { target: "Bogotá"  , source: "Colombia", strength: 0.85 },
  { target: "Caldas"  , source: "Colombia", strength: 0.85 },
  { target: "La Guajira"  , source: "Colombia", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Colombia", strength: 0.85 },
  { target: "Bogotá"  , source: "Corea", strength: 0.85 },
  { target: "Bogotá"  , source: "Costa de Marfil", strength: 0.85 },
  { target: "Antioquia"  , source: "Costa de Marfil", strength: 0.85 },
  { target: "Bogotá"  , source: "Costa Rica", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Costa Rica", strength: 0.85 },
  { target: "Bogotá", source: "Dinamarca" , strength: 0.85 },
  { target: "Antioquia", source: "Ecuador" , strength: 0.85 },
  { target: "Atlántico", source: "Ecuador" , strength: 0.85 },
  { target: "Bogotá", source: "Ecuador" , strength: 0.85 },
  { target: "Caldas", source: "Ecuador" , strength: 0.85 },
  { target: "Córdoba", source: "Ecuador" , strength: 0.85 },
  { target: "Cundinamarca", source: "Ecuador" , strength: 0.85 },
  { target: "Nariño"  , source: "Ecuador", strength: 0.85 },
  { target: "Risaralda"  , source: "Ecuador", strength: 0.85 },
  { target: "Santander"  , source: "Ecuador", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Ecuador", strength: 0.85 },
  { target: "Antioquia"  , source: "El Salvador", strength: 0.85 },
  { target: "Antioquia"  , source: "España", strength: 0.85 },
  { target: "Bogotá"  , source: "España", strength: 0.85 },
  { target: "Bolivar"  , source: "España", strength: 0.85 },
  { target: "Cauca", source: "España" , strength: 0.85 },
  { target: "Cundinamarca"  , source: "España", strength: 0.85 },
  { target: "Risaralda"  , source: "España", strength: 0.85 },
  { target: "Santander"  , source: "España", strength: 0.85 },
  { target: "Valle del Cauca", source: "España" , strength: 0.85 },
  { target: "Antioquia", source: "Estados Unidos" , strength: 0.85 },
  { target: "Atlántico", source: "Estados Unidos" , strength: 0.85 },
  { target: "Bogotá", source: "Estados Unidos" , strength: 0.85 },
  { target: "Bolivar", source: "Estados Unidos" , strength: 0.85 },
  { target: "Cundinamarca", source: "Estados Unidos" , strength: 0.85 },
  { target: "La Guajira"  , source: "Estados Unidos", strength: 0.85 },
  { target: "San Andrés y Providencia"  , source: "Estados Unidos", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Estados Unidos", strength: 0.85 },
  { target: "Magdalena", source: "Estados Unidos" , strength: 0.85 },
  { target: "Risaralda", source: "Estados Unidos" , strength: 0.85 },
  { target: "Santander", source: "Estados Unidos" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Estados Unidos" , strength: 0.85 },
  { target: "Bogotá"  , source: "Filipinas", strength: 0.85 },
  { target: "Bogotá"  , source: "Finlandia", strength: 0.85 },
  { target: "Antioquia"  , source: "Francia", strength: 0.85 },
  { target: "Atlántico"  , source: "Francia", strength: 0.85 },
  { target: "Bogotá"  , source: "Francia", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Francia", strength: 0.85 },
  { target: "Risaralda"  , source: "Francia", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Francia", strength: 0.85 },
  { target: "Antioquia"  , source: "Ghana", strength: 0.85 },
  { target: "Antioquia"  , source: "Guatemala", strength: 0.85 },
  { target: "Antioquia"  , source: "Hong Kong", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Hong Kong", strength: 0.85 },
  { target: "Bogotá"  , source: "Hungria", strength: 0.85 },
  { target: "Bogotá"  , source: "India", strength: 0.85 },
  { target: "Bogotá"  , source: "Indonesia", strength: 0.85 },
  { target: "Antioquia", source: "Indonesia" , strength: 0.85 },
  { target: "Cundinamarca"  , source: "Indonesia", strength: 0.85 },
  { target: "Huila", source: "Indonesia" , strength: 0.85 },
  { target: "Bogotá"  , source: "Irlanda", strength: 0.85 },
  { target: "Bogotá"  , source: "Israel", strength: 0.85 },
  { target: "Antioquia"  , source: "Israel", strength: 0.85 },
  { target: "Antioquia", source: "Italia" , strength: 0.85 },
  { target: "Atlántico", source: "Italia" , strength: 0.85 },
  { target: "Bogotá", source: "Italia" , strength: 0.85 },
  { target: "Bolivar", source: "Italia" , strength: 0.85 },
  { target: "Caldas", source: "Italia" , strength: 0.85 },
  { target: "Cauca", source: "Italia" , strength: 0.85 },
  { target: "Cundinamarca", source: "Italia" , strength: 0.85 },
  { target: "Nariño", source: "Italia" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Italia" , strength: 0.85 },
  { target: "Caldas", source: "Japon" , strength: 0.85 },
  { target: "Atlántico"  , source: "Libano", strength: 0.85 },
  { target: "Antioquia"  , source: "Malasia", strength: 0.85 },
  { target: "Bogotá"  , source: "Malasia", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Malasia", strength: 0.85 },
  { target: "Norte de Santander"  , source: "Malasia", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Malasia", strength: 0.85 },
  { target: "Antioquia"  , source: "Mexico", strength: 0.85 },
  { target: "Atlántico"  , source: "Mexico", strength: 0.85 },
  { target: "Bogotá"  , source: "Mexico", strength: 0.85 },
  { target: "Cauca"  , source: "Mexico", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Mexico", strength: 0.85 },
  { target: "Risaralda"  , source: "Mexico", strength: 0.85 },
  { target: "Santander"  , source: "Mexico", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Mexico", strength: 0.85 },
  { target: "Antioquia"  , source: "Nigeria", strength: 0.85 },
  { target: "Antioquia", source: "Paises Bajos" , strength: 0.85 },
  { target: "Bogotá", source: "Paises Bajos" , strength: 0.85 },
  { target: "Cauca", source: "Paises Bajos" , strength: 0.85 },
  { target: "Cundinamarca", source: "Paises Bajos" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Paises Bajos" , strength: 0.85 },
  { target: "Antioquia", source: "Pakistan" , strength: 0.85 },
  { target: "Antioquia", source: "Panama" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Panama" , strength: 0.85 },
  { target: "Antioquia"  , source: "Peru", strength: 0.85 },
  { target: "Atlántico"  , source: "Peru", strength: 0.85 },
  { target: "Bogotá"  , source: "Peru", strength: 0.85 },
  { target: "Caldas"  , source: "Peru", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Peru", strength: 0.85 },
  { target: "Nariño"  , source: "Peru", strength: 0.85 },
  { target: "Santander"  , source: "Peru", strength: 0.85 },
  { target: "Sucre"  , source: "Peru", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Peru", strength: 0.85 },
  { target: "Bogotá"  , source: "Polonia", strength: 0.85 },
  { target: "Risaralda"  , source: "Polonia", strength: 0.85 },
  { target: "Atlántico"  , source: "Polonia", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Polonia", strength: 0.85 },
  { target: "Bogotá", source: "Portugal" , strength: 0.85 },
  { target: "Cundinamarca", source: "Portugal" , strength: 0.85 },
  { target: "Risaralda", source: "Reino Unido" , strength: 0.85 },
  { target: "Bogotá", source: "Reino Unido" , strength: 0.85 },
  { target: "Valle del Cauca", source: "Reino Unido" , strength: 0.85 },
  { target: "Cundinamarca", source: "Republica Checa" , strength: 0.85 },
  { target: "Bogotá", source: "Republica Checa" , strength: 0.85 },
  { target: "Antioquia"  , source: "Republica Dominicana", strength: 0.85 },
  { target: "Bogotá", source: "Reunion" , strength: 0.85 },
  { target: "Bogotá", source: "Rumania" , strength: 0.85 },
  { target: "Bogotá"  , source: "Serbia", strength: 0.85 },
  { target: "Valle del Cauca"  , source: "Singapur", strength: 0.85 },
  { target: "Bogotá"  , source: "Suecia", strength: 0.85 },
  { target: "Antioquia"  , source: "Tokelau", strength: 0.85 },
  { target: "Bogotá"  , source: "Trinidad y Tobago", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Trinidad y Tobago", strength: 0.85 },
  { target: "Bogotá"  , source: "Suiza", strength: 0.85 },
  { target: "Cundinamarca"  , source: "Suiza", strength: 0.85 },
  { target: "Atlántico"  , source: "Suiza", strength: 0.85 },
  { target: "Risaralda"  , source: "Suiza", strength: 0.85 },
  { target: "Bogotá"  , source: "Taiwan, Provincia China", strength: 0.85 },
  { target: "Antioquia"  , source: "Turquia", strength: 0.85 },
  { target: "Atlántico"  , source: "Turquia", strength: 0.85 },
  { target: "Bogotá", source: "Turquia" , strength: 0.85 },
  { target: "Bolivar", source: "Turquia" , strength: 0.85 },
  { target: "Cundinamarca", source: "Turquia" , strength: 0.85 },
  { target: "Quindío", source: "Turquia" , strength: 0.85 },
  { target: "Bogotá"  , source: "Uruguay", strength: 0.85 },
  { target: "Norte de Santander", source: "Venezuela" , strength: 0.85 },
  { target: "Risaralda", source: "Venezuela" , strength: 0.85 },
  { target: "Bogotá", source: "Venezuela" , strength: 0.85 },
  { target: "Cundinamarca", source: "Venezuela" , strength: 0.85 },
  { target: "Santander", source: "Venezuela" , strength: 0.85 },
  { target: "Antioquia", source: "Venezuela" , strength: 0.85 },
  { target: "Bogotá"  , source: "Vietnam", strength: 0.85 }
]
function getNeighbors(node) {
  return links.reduce(function (neighbors, link) {
      if (link.target.id === node.id) {
        neighbors.push(link.source.id)
      } else if (link.source.id === node.id) {
        neighbors.push(link.target.id)
      }
      return neighbors
    },
    [node.id]
  )
}
function isNeighborLink(node, link) {
  return link.target.id === node.id || link.source.id === node.id
}
function getNodeColor(node, neighbors) {
  if (Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1) {
    return node.level === 1 ? 'blue' : 'green'
  }
  return node.level === 1 ? 'red' : 'gray'
}
function getLinkColor(node, link) {
  return isNeighborLink(node, link) ? 'green' : '#E5E5E5'
}
function getTextColor(node, neighbors) {
  return Array.isArray(neighbors) && neighbors.indexOf(node.id) > -1 ? 'green' : 'black'
}
var width = window.innerWidth
var height = window.innerHeight
var svg = d3.select('svg')
svg.attr('width', width).attr('height', height)
// simulation setup with all forces
var linkForce = d3
  .forceLink()
  .id(function (link) { return link.id })
  .strength(function (link) { return link.strength })
var simulation = d3
  .forceSimulation()
  .force('link', linkForce)
  .force('charge', d3.forceManyBody().strength(-500))
  .force('center', d3.forceCenter(width/2, height/2))
var dragDrop = d3.drag().on('start', function (node) {
  node.fx = node.x
  node.fy = node.y
}).on('drag', function (node) {
  simulation.alphaTarget(0.4).restart()
  node.fx = d3.event.x
  node.fy = d3.event.y
}).on('end', function (node) {
  if (!d3.event.active) {
    simulation.alphaTarget(0)
  }
  node.fx = 0
  node.fy = 0
})
function selectNode(selectedNode) {
  var neighbors = getNeighbors(selectedNode)
  // we modify the styles to highlight selected nodes
  nodeElements.attr('fill', function (node) { return getNodeColor(node, neighbors)})
  textElements.attr('fill', function (node) { return getTextColor(node, neighbors)})
  linkElements.attr('stroke', function (link) { return getLinkColor(selectedNode , link)})

}

let tooltip = svg.append("text")
        .style("font-size", "10pt")
        .style("font-family", "sans-serif")  
        .style("color", "steelblue")
        .attr("x", 0);
let tooltip2 = svg.append("text")
        .style("font-size", "10pt")
        .style("font-family", "sans-serif")  
        .style("color", "steelblue")
        .attr("x", 0);
let tooltip3 = svg.append("text")
        .style("font-size", "10pt")
        .style("font-family", "sans-serif")  
        .style("color", "steelblue")
        .attr("x", 0);        




var linkElements = svg.append("g")
  .attr("class", "links")
  .selectAll("line")
  .data(links)
  .enter().append("line")
    .attr("stroke-width", 1)
    .attr("stroke", "rgba(50, 50, 50, 0.2)")
var nodeElements = svg.append("g")
  .attr("class", "nodes")
  .selectAll("circle")
  .data(nodes)
  .enter().append("circle")
    .attr("r", 7)
    .attr("fill", getNodeColor)
    .call(dragDrop).on('mouseover',function(d){

    tooltip.attr("x", width-730)
      .attr("y", height-625)
      .html(`${d.type}:  ${d.label}`)
      .style('font-weight',"bold").style("fill", "black").style("font-size",'14px');

    tooltip2.attr("x", width-730)
      .attr("y", height-605)
      .html(`${parseInt(d.quantity).toLocaleString()} de Cacao/Chocolate importadas medidas en KG`)
      .style('font-weight',"bold").style("fill", "firebrick").style("font-size",'12px');

    tooltip3.attr("x", width-730)
      .attr("y", height-585)
      .html(`Valor de ${parseInt(d.value).toLocaleString()} Millones de Pesos Colombianos (COP) aprox.`)
      .style('font-weight',"bold").style("fill", "firebrick").style("font-size",'12px'); 


    }).on('mouseout',function(d){

     tooltip.attr("x", width-730)
      .attr("y", height-625)
      .html(``)
      .style('font-weight',"bold").style("fill", "none").style("font-size",'14px');

    tooltip2.attr("x", width-730)
      .attr("y", height-605)
      .html(``)
      .style('font-weight',"bold").style("fill", "none").style("font-size",'12px');

    tooltip3.attr("x", width-730)
      .attr("y", height-585)
      .html(``)
      .style('font-weight',"bold").style("fill", "none").style("font-size",'12px'); 


    }).on('click', selectNode)
    
var textElements = svg.append("g")
  .attr("class", "texts")
  .selectAll("text")
  .data(nodes)
  .enter().append("text")
    .text(function (node) { return  node.label })
    .attr("font-size", 10)
    .attr("dx", 15)
    .attr("dy", 4)
simulation.nodes(nodes).on('tick', () => {
  nodeElements
    .attr('cx', function (node) { return node.x })
    .attr('cy', function (node) { return node.y })
  textElements
    .attr('x', function (node) { return node.x })
    .attr('y', function (node) { return node.y })
  linkElements
    .attr('x1', function (link) { return link.source.x })
    .attr('y1', function (link) { return link.source.y })
    .attr('x2', function (link) { return link.target.x })
    .attr('y2', function (link) { return link.target.y })
})
simulation.force("link").links(links)
</script>