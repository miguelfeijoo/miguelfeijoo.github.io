<!DOCTYPE html>
<body>
  <!-- Placeholder for the widget -->
  <div id="navio"></div>


  <!-- NAVIO Step 0: Load the libraries -->
  <script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
  <script type="text/javascript" src="https://unpkg.com/navio/dist/navio.min.js"></script>
<script>

  // NAVIO  Step 1.  Create a Navio passing a d3 selection to place it and an optional height
  var nv = navio(d3.select("#navio"), 600);

  // NAVIO Step 2. Add the Categorical and Sequential attributes you want to use
  var catColumns = [ "car-type", "gate-name", "dayOfTheWeek", "dayNight","car-id", "year" ];
  var seqColumns = [  "minutes", "hours", "day", "month", "seconds", "carIdPart1", "carIdPart2", "Timestamp" ];
  catColumns.forEach((c) => nv.addCategoricalAttrib(c));
  seqColumns.forEach((c) => nv.addSequentialAttrib(c));


  // NAVIO Step 3. Load your data!
  d3.csv("https://raw.githubusercontent.com/john-guerra/navio/master/example_vastChallenge2017/Lekagul%20Sensor%20Data.csv", function (err, data) {
    if (err) throw err;

    console.log(data)

    nv.data(data);
  });

	var fmt = d3.timeParse("%Y-%m-%d %H:%M:%S");
	function type(row) {
	  var split = row["car-id"].split("-");
	  row.Timestamp = fmt(row.Timestamp);
	  row.hours = row.Timestamp.getHours();
	  row.dayNight = row.hour < 6 || row.hour>18 ? "night": "day";
	  row.dayOfTheWeek = row.Timestamp.getDay();
	  row.minutes = row.Timestamp.getMinutes();
	  row.seconds = row.Timestamp.getSeconds();
	  row.year = row.Timestamp.getFullYear();
	  row.month = row.Timestamp.getMonth();
	  row.day = row.Timestamp.getDate();
	  row.carIdPart1 = +split[0];
	  row.carIdPart2 = +split[1];
	  return row;
	}



</script>
</body>
</html>

